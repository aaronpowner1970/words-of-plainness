<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    
    <!-- =====================================================
         CHAPTER TEMPLATE - Words of Plainness
         Version 2.0 - January 25, 2026
         
         TO USE THIS TEMPLATE:
         1. Copy this file and rename: chapter-##-[slug].html
         2. Search and replace the following placeholders:
            - [CHAPTER_NUMBER] → e.g., "2"
            - [CHAPTER_TITLE] → e.g., "The Plan of Salvation"
            - [CHAPTER_SLUG] → e.g., "the-plan" (lowercase, hyphens)
            - [CHAPTER_ID] → e.g., "ch02" (for localStorage)
            - [SCRIPTURE_QUOTE] → Opening scripture text
            - [SCRIPTURE_REFERENCE] → e.g., "Alma 42:8"
            - [READING_TIME] → Estimated minutes (e.g., "15")
            - [PREV_CHAPTER_URL] → Previous chapter filename
            - [PREV_CHAPTER_TITLE] → Previous chapter display title
            - [NEXT_CHAPTER_URL] → Next chapter filename
            - [NEXT_CHAPTER_TITLE] → Next chapter display title
            - [DISCORD_CHANNEL_ID] → Discord channel ID for this chapter
         3. Replace chapter content in the main section
         4. Update the TIMESTAMPS object with generated timestamps
         5. Update asset paths (audio, PDF, slides, etc.)
         ===================================================== -->
    
    <meta name="description" content="Chapter [CHAPTER_NUMBER]: [CHAPTER_TITLE] - Words of Plainness by Brother Aaron Powner">
    <title>Chapter [CHAPTER_NUMBER]: [CHAPTER_TITLE] | Words of Plainness</title>
    
    <!-- Fonts -->
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Crimson+Pro:ital,wght@0,400;0,600;1,400&family=Source+Sans+Pro:wght@400;600&display=swap" rel="stylesheet">
    
    <!-- Favicon -->
    <link rel="icon" type="image/svg+xml" href="data:image/svg+xml,<svg xmlns='http://www.w3.org/2000/svg' viewBox='0 0 100 100'><circle cx='50' cy='50' r='40' fill='%23C4943A'/></svg>">
    
    <!-- Stylesheet -->
    <link rel="stylesheet" href="../../css/styles.css">
    
    <style>
        /* =====================================================
           CHAPTER PAGE SPECIFIC STYLES
           ===================================================== */
        
        /* Chapter Header */
        .chapter-header {
            padding: calc(80px + var(--space-xl)) var(--space-xl) var(--space-lg);
            background: 
                linear-gradient(to bottom, rgba(42, 29, 20, 0.55) 0%, rgba(42, 29, 20, 0.6) 100%),
                url('../../assets/images/library-empty.png') center center / cover no-repeat;
            text-align: center;
        }
        
        .chapter-number {
            font-family: var(--font-serif);
            font-size: 1rem;
            color: var(--gold-primary);
            letter-spacing: 0.15em;
            text-transform: uppercase;
            margin-bottom: 0.5rem;
        }
        
        .chapter-title {
            font-family: var(--font-serif);
            font-size: clamp(2rem, 4vw, 3rem);
            color: var(--cream-soft);
            margin-bottom: 1rem;
        }
        
        .chapter-scripture {
            font-family: var(--font-serif);
            font-style: italic;
            font-size: 1.1rem;
            color: var(--cream);
            opacity: 0.9;
            max-width: 600px;
            margin: 0 auto;
            line-height: 1.6;
        }
        
        .chapter-scripture cite {
            display: block;
            margin-top: 0.5rem;
            font-style: normal;
            color: var(--gold-primary);
        }
        
        /* Quick Navigation */
        .quick-nav {
            display: flex;
            justify-content: center;
            gap: 1rem;
            padding: var(--space-md);
            background: var(--rich-brown);
            border-bottom: 1px solid rgba(196, 148, 58, 0.2);
            flex-wrap: wrap;
        }
        
        .quick-nav-btn {
            display: flex;
            align-items: center;
            gap: 0.5rem;
            padding: 0.5rem 1rem;
            background: transparent;
            border: 1px solid var(--gold-primary);
            color: var(--cream);
            font-family: var(--font-sans);
            font-size: 0.875rem;
            border-radius: 4px;
            cursor: pointer;
            transition: all 0.2s ease;
        }
        
        .quick-nav-btn:hover {
            background: var(--gold-primary);
            color: var(--rich-brown);
        }
        
        .quick-nav-btn svg {
            width: 16px;
            height: 16px;
        }
        
        /* Main Content Layout */
        .chapter-layout {
            display: grid;
            grid-template-columns: 250px 1fr;
            max-width: 1400px;
            margin: 0 auto;
        }
        
        @media (max-width: 1024px) {
            .chapter-layout {
                grid-template-columns: 1fr;
            }
        }
        
        /* Table of Contents Sidebar */
        .toc-sidebar {
            position: sticky;
            top: 80px;
            height: fit-content;
            padding: var(--space-lg);
            background: var(--deep-brown);
            border-right: 1px solid rgba(196, 148, 58, 0.2);
        }
        
        @media (max-width: 1024px) {
            .toc-sidebar {
                display: none;
            }
        }
        
        .toc-sidebar h3 {
            font-family: var(--font-serif);
            color: var(--gold-primary);
            font-size: 1rem;
            margin-bottom: 1rem;
            text-transform: uppercase;
            letter-spacing: 0.1em;
        }
        
        .toc-sidebar ul {
            list-style: none;
            padding: 0;
            margin: 0;
        }
        
        .toc-sidebar li {
            margin-bottom: 0.75rem;
        }
        
        .toc-sidebar a {
            color: var(--cream);
            text-decoration: none;
            font-size: 0.9rem;
            opacity: 0.8;
            transition: all 0.2s;
        }
        
        .toc-sidebar a:hover {
            color: var(--gold-primary);
            opacity: 1;
        }
        
        /* Chapter Content */
        .chapter-content {
            padding: var(--space-xl);
            background: var(--rich-brown);
        }
        
        .chapter-content h2 {
            font-family: var(--font-serif);
            color: var(--gold-primary);
            font-size: 1.5rem;
            margin: var(--space-lg) 0 var(--space-md);
            padding-top: var(--space-md);
            border-top: 1px solid rgba(196, 148, 58, 0.2);
        }
        
        .chapter-content h2:first-child {
            margin-top: 0;
            padding-top: 0;
            border-top: none;
        }
        
        .chapter-content p {
            font-family: var(--font-serif);
            color: var(--cream);
            font-size: 1.1rem;
            line-height: 1.8;
            margin-bottom: 1.5rem;
        }
        
        /* Sentence Highlighting for Audio Sync */
        .chapter-content [data-sentence] {
            transition: background-color 0.3s ease;
            cursor: pointer;
            border-radius: 2px;
        }
        
        .chapter-content [data-sentence]:hover {
            background: rgba(196, 148, 58, 0.1);
        }
        
        .chapter-content [data-sentence].highlight {
            background: rgba(196, 148, 58, 0.3);
        }
        
        /* Scripture References */
        .scripture-ref {
            color: var(--gold-primary);
            text-decoration: none;
            border-bottom: 1px dotted var(--gold-primary);
        }
        
        .scripture-ref:hover {
            opacity: 0.8;
        }
        
        /* Audio Player */
        .audio-player {
            position: fixed;
            bottom: 0;
            left: 0;
            right: 0;
            background: var(--deep-brown);
            border-top: 2px solid var(--gold-primary);
            padding: var(--space-md);
            display: none;
            z-index: 1000;
        }
        
        .audio-player.active {
            display: block;
        }
        
        .audio-controls {
            display: flex;
            align-items: center;
            gap: 1rem;
            max-width: 800px;
            margin: 0 auto;
        }
        
        .play-pause-btn {
            width: 48px;
            height: 48px;
            border-radius: 50%;
            background: var(--gold-primary);
            border: none;
            cursor: pointer;
            display: flex;
            align-items: center;
            justify-content: center;
            flex-shrink: 0;
        }
        
        .play-pause-btn svg {
            width: 24px;
            height: 24px;
            fill: var(--rich-brown);
        }
        
        .seek-bar {
            flex: 1;
            height: 8px;
            border-radius: 4px;
            background: rgba(232, 220, 196, 0.2);
            cursor: pointer;
            position: relative;
        }
        
        .seek-progress {
            height: 100%;
            background: var(--gold-primary);
            border-radius: 4px;
            width: 0%;
        }
        
        .time-display {
            color: var(--cream);
            font-family: var(--font-sans);
            font-size: 0.875rem;
            min-width: 100px;
            text-align: center;
        }
        
        .speed-control {
            background: transparent;
            border: 1px solid var(--gold-primary);
            color: var(--cream);
            padding: 0.25rem 0.5rem;
            border-radius: 4px;
            cursor: pointer;
            font-size: 0.875rem;
        }
        
        .close-player-btn {
            background: transparent;
            border: none;
            color: var(--cream);
            cursor: pointer;
            padding: 0.5rem;
            opacity: 0.7;
        }
        
        .close-player-btn:hover {
            opacity: 1;
        }
        
        /* Study Resources Section */
        .study-resources {
            padding: var(--space-xl);
            background: var(--deep-brown);
        }
        
        .study-resources h2 {
            font-family: var(--font-serif);
            color: var(--gold-primary);
            font-size: 1.5rem;
            text-align: center;
            margin-bottom: var(--space-lg);
        }
        
        .resource-grid {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(200px, 1fr));
            gap: var(--space-md);
            max-width: 1000px;
            margin: 0 auto;
        }
        
        .resource-card {
            background: var(--rich-brown);
            border: 1px solid rgba(196, 148, 58, 0.3);
            border-radius: 8px;
            padding: var(--space-lg);
            text-align: center;
            cursor: pointer;
            transition: all 0.3s ease;
        }
        
        .resource-card:hover {
            border-color: var(--gold-primary);
            transform: translateY(-2px);
        }
        
        .resource-card svg {
            width: 48px;
            height: 48px;
            margin-bottom: var(--space-sm);
            fill: var(--gold-primary);
        }
        
        .resource-card h3 {
            font-family: var(--font-sans);
            color: var(--cream);
            font-size: 1rem;
            margin-bottom: 0.5rem;
        }
        
        .resource-card p {
            font-size: 0.875rem;
            color: var(--cream);
            opacity: 0.7;
        }
        
        /* Reflection Section */
        .reflection-section {
            padding: var(--space-xl);
            background: var(--rich-brown);
            border-top: 1px solid rgba(196, 148, 58, 0.2);
        }
        
        .reflection-section h2 {
            font-family: var(--font-serif);
            color: var(--gold-primary);
            font-size: 1.5rem;
            text-align: center;
            margin-bottom: var(--space-lg);
        }
        
        .reflection-prompts {
            max-width: 700px;
            margin: 0 auto;
        }
        
        .reflection-step {
            margin-bottom: var(--space-lg);
        }
        
        .reflection-step h3 {
            font-family: var(--font-sans);
            color: var(--cream);
            font-size: 1rem;
            margin-bottom: var(--space-sm);
        }
        
        .reflection-step textarea {
            width: 100%;
            min-height: 100px;
            padding: var(--space-md);
            background: var(--deep-brown);
            border: 1px solid rgba(196, 148, 58, 0.3);
            border-radius: 4px;
            color: var(--cream);
            font-family: var(--font-serif);
            font-size: 1rem;
            resize: vertical;
        }
        
        .reflection-step textarea:focus {
            outline: none;
            border-color: var(--gold-primary);
        }
        
        .reflection-buttons {
            display: flex;
            justify-content: center;
            gap: var(--space-md);
            margin-top: var(--space-lg);
        }
        
        .btn-save, .btn-clear {
            padding: 0.75rem 1.5rem;
            border-radius: 4px;
            font-family: var(--font-sans);
            font-size: 0.875rem;
            cursor: pointer;
            transition: all 0.2s;
        }
        
        .btn-save {
            background: var(--gold-primary);
            border: none;
            color: var(--rich-brown);
        }
        
        .btn-save:hover {
            opacity: 0.9;
        }
        
        .btn-clear {
            background: transparent;
            border: 1px solid var(--cream);
            color: var(--cream);
        }
        
        .btn-clear:hover {
            background: rgba(232, 220, 196, 0.1);
        }
        
        /* Discord Section */
        .discord-section {
            padding: var(--space-xl);
            background: var(--deep-brown);
            text-align: center;
        }
        
        .discord-card {
            max-width: 600px;
            margin: 0 auto;
            padding: var(--space-xl);
            background: var(--rich-brown);
            border: 1px solid rgba(88, 101, 242, 0.3);
            border-radius: 12px;
        }
        
        .discord-card h2 {
            font-family: var(--font-serif);
            color: var(--cream);
            font-size: 1.5rem;
            margin-bottom: var(--space-sm);
        }
        
        .discord-card p {
            color: var(--cream);
            opacity: 0.8;
            margin-bottom: var(--space-lg);
        }
        
        .btn-discord {
            display: inline-flex;
            align-items: center;
            gap: 0.75rem;
            padding: 1rem 2rem;
            background: #5865F2;
            color: white;
            text-decoration: none;
            border-radius: 8px;
            font-family: var(--font-sans);
            font-weight: 600;
            transition: all 0.2s;
        }
        
        .btn-discord:hover {
            background: #4752C4;
            transform: translateY(-2px);
        }
        
        .btn-discord svg {
            width: 24px;
            height: 24px;
            fill: currentColor;
        }
        
        /* Chapter Navigation */
        .chapter-nav {
            display: flex;
            justify-content: space-between;
            padding: var(--space-lg);
            background: var(--rich-brown);
            border-top: 1px solid rgba(196, 148, 58, 0.2);
        }
        
        .chapter-nav a {
            display: flex;
            align-items: center;
            gap: 0.5rem;
            color: var(--cream);
            text-decoration: none;
            font-family: var(--font-sans);
            padding: 0.75rem 1rem;
            border-radius: 4px;
            transition: all 0.2s;
        }
        
        .chapter-nav a:hover {
            background: rgba(196, 148, 58, 0.1);
            color: var(--gold-primary);
        }
        
        .chapter-nav svg {
            width: 20px;
            height: 20px;
        }
        
        /* Reading Progress Bar */
        .reading-progress {
            position: fixed;
            top: 0;
            left: 0;
            height: 3px;
            background: var(--gold-primary);
            width: 0%;
            z-index: 9999;
            transition: width 0.1s;
        }
        
        /* Back to Top Button */
        .back-to-top {
            position: fixed;
            bottom: 100px;
            right: 20px;
            width: 48px;
            height: 48px;
            border-radius: 50%;
            background: var(--gold-primary);
            border: none;
            cursor: pointer;
            display: none;
            align-items: center;
            justify-content: center;
            z-index: 999;
            transition: all 0.2s;
        }
        
        .back-to-top.visible {
            display: flex;
        }
        
        .back-to-top svg {
            width: 24px;
            height: 24px;
            fill: var(--rich-brown);
        }
        
        /* Modal Overlay */
        .modal-overlay {
            position: fixed;
            inset: 0;
            background: rgba(0, 0, 0, 0.9);
            display: none;
            align-items: center;
            justify-content: center;
            z-index: 2000;
            padding: var(--space-lg);
        }
        
        .modal-overlay.active {
            display: flex;
        }
        
        .modal-content {
            background: var(--deep-brown);
            border-radius: 12px;
            max-width: 90vw;
            max-height: 90vh;
            overflow: auto;
            position: relative;
        }
        
        .modal-close {
            position: absolute;
            top: 1rem;
            right: 1rem;
            background: var(--gold-primary);
            border: none;
            width: 36px;
            height: 36px;
            border-radius: 50%;
            cursor: pointer;
            display: flex;
            align-items: center;
            justify-content: center;
            z-index: 10;
        }
        
        .modal-close svg {
            width: 20px;
            height: 20px;
            fill: var(--rich-brown);
        }
        
        /* Slides Carousel */
        .slides-container {
            padding: var(--space-lg);
        }
        
        .slide-main {
            display: flex;
            align-items: center;
            justify-content: center;
            gap: var(--space-lg);
        }
        
        .slide-main img {
            max-height: 70vh;
            max-width: 100%;
            border-radius: 8px;
        }
        
        .slide-nav-btn {
            background: var(--gold-primary);
            border: none;
            width: 48px;
            height: 48px;
            border-radius: 50%;
            cursor: pointer;
            display: flex;
            align-items: center;
            justify-content: center;
            flex-shrink: 0;
        }
        
        .slide-nav-btn svg {
            width: 24px;
            height: 24px;
            fill: var(--rich-brown);
        }
        
        .slide-thumbnails {
            display: flex;
            justify-content: center;
            gap: 0.5rem;
            margin-top: var(--space-lg);
            flex-wrap: wrap;
        }
        
        .slide-thumb {
            width: 60px;
            height: 45px;
            object-fit: cover;
            border-radius: 4px;
            cursor: pointer;
            opacity: 0.5;
            transition: all 0.2s;
        }
        
        .slide-thumb.active,
        .slide-thumb:hover {
            opacity: 1;
            outline: 2px solid var(--gold-primary);
        }
    </style>
</head>
<body>
    <!-- Reading Progress Bar -->
    <div class="reading-progress" id="readingProgress"></div>
    
    <!-- Include site header here or via JavaScript -->
    <header class="site-header">
        <!-- Your standard site header -->
    </header>
    
    <!-- Chapter Header -->
    <section class="chapter-header">
        <p class="chapter-number">Chapter [CHAPTER_NUMBER]</p>
        <h1 class="chapter-title">[CHAPTER_TITLE]</h1>
        <blockquote class="chapter-scripture">
            "[SCRIPTURE_QUOTE]"
            <cite>— [SCRIPTURE_REFERENCE]</cite>
        </blockquote>
    </section>
    
    <!-- Quick Navigation -->
    <nav class="quick-nav">
        <button class="quick-nav-btn" id="btnReadAloud">
            <svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                <polygon points="5 3 19 12 5 21 5 3"></polygon>
            </svg>
            Read Aloud
        </button>
        <button class="quick-nav-btn" id="btnFontDecrease">
            <svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                <line x1="5" y1="12" x2="19" y2="12"></line>
            </svg>
            A-
        </button>
        <button class="quick-nav-btn" id="btnFontIncrease">
            <svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                <line x1="12" y1="5" x2="12" y2="19"></line>
                <line x1="5" y1="12" x2="19" y2="12"></line>
            </svg>
            A+
        </button>
        <button class="quick-nav-btn" id="btnBookmark">
            <svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                <path d="M19 21l-7-5-7 5V5a2 2 0 0 1 2-2h10a2 2 0 0 1 2 2z"></path>
            </svg>
            Bookmark
        </button>
        <button class="quick-nav-btn" id="btnShare">
            <svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                <circle cx="18" cy="5" r="3"></circle>
                <circle cx="6" cy="12" r="3"></circle>
                <circle cx="18" cy="19" r="3"></circle>
                <line x1="8.59" y1="13.51" x2="15.42" y2="17.49"></line>
                <line x1="15.41" y1="6.51" x2="8.59" y2="10.49"></line>
            </svg>
            Share
        </button>
    </nav>
    
    <!-- Main Content Layout -->
    <div class="chapter-layout">
        <!-- Table of Contents Sidebar -->
        <nav class="toc-sidebar">
            <h3>Contents</h3>
            <ul>
                <!-- UPDATE THESE TO MATCH YOUR CHAPTER SECTIONS -->
                <li><a href="#section-1">Section 1 Title</a></li>
                <li><a href="#section-2">Section 2 Title</a></li>
                <li><a href="#section-3">Section 3 Title</a></li>
                <li><a href="#section-4">Section 4 Title</a></li>
                <li><a href="#section-5">Section 5 Title</a></li>
            </ul>
        </nav>
        
        <!-- Chapter Content -->
        <article class="chapter-content">
            
            <!-- =====================================================
                 CHAPTER CONTENT GOES HERE
                 
                 IMPORTANT: Wrap each sentence in a span with data-sentence attribute:
                 <span data-sentence="1">First sentence.</span>
                 <span data-sentence="2">Second sentence.</span>
                 
                 Number sentences sequentially through the entire chapter.
                 ===================================================== -->
            
            <h2 id="section-1">Section 1 Title</h2>
            
            <p>
                <span data-sentence="1">This is the first sentence of the chapter.</span>
                <span data-sentence="2">This is the second sentence.</span>
                <span data-sentence="3">Continue numbering sequentially through the entire chapter.</span>
            </p>
            
            <p>
                <span data-sentence="4">Each sentence needs its own span with a data-sentence attribute.</span>
                <span data-sentence="5">This enables synchronized highlighting with the audio narration.</span>
            </p>
            
            <h2 id="section-2">Section 2 Title</h2>
            
            <p>
                <span data-sentence="6">Continue your chapter content here.</span>
                <span data-sentence="7">Remember to include scripture references with the scripture-ref class.</span>
                <span data-sentence="8">For example: <a href="https://www.churchofjesuschrist.org/study/scriptures/bofm/alma/42.8" class="scripture-ref" target="_blank">Alma 42:8</a> teaches us about the plan of redemption.</span>
            </p>
            
            <!-- Continue with more sections... -->
            
            <h2 id="section-3">Section 3 Title</h2>
            <p><span data-sentence="9">More content...</span></p>
            
            <h2 id="section-4">Section 4 Title</h2>
            <p><span data-sentence="10">More content...</span></p>
            
            <h2 id="section-5">Section 5 Title</h2>
            <p><span data-sentence="11">More content...</span></p>
            
            <!-- END CHAPTER CONTENT -->
            
        </article>
    </div>
    
    <!-- Study Resources Section -->
    <section class="study-resources">
        <h2>Study Resources</h2>
        <div class="resource-grid">
            
            <!-- PDF Download -->
            <a class="resource-card" href="../../assets/pdf/chapter-[CHAPTER_NUMBER]-[CHAPTER_SLUG]-final.pdf" download>
                <svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                    <path d="M14 2H6a2 2 0 0 0-2 2v16a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2V8z"></path>
                    <polyline points="14 2 14 8 20 8"></polyline>
                    <line x1="12" y1="18" x2="12" y2="12"></line>
                    <line x1="9" y1="15" x2="15" y2="15"></line>
                </svg>
                <h3>Download PDF</h3>
                <p>Read offline or print</p>
            </a>
            
            <!-- Audio Overview -->
            <div class="resource-card" id="btnOverview">
                <svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                    <circle cx="12" cy="12" r="10"></circle>
                    <polygon points="10 8 16 12 10 16 10 8"></polygon>
                </svg>
                <h3>Audio Overview</h3>
                <p>5-minute summary</p>
            </div>
            
            <!-- Musical Testimony -->
            <div class="resource-card" id="btnTestimony">
                <svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                    <path d="M9 18V5l12-2v13"></path>
                    <circle cx="6" cy="18" r="3"></circle>
                    <circle cx="18" cy="16" r="3"></circle>
                </svg>
                <h3>Musical Testimony</h3>
                <p>Song inspired by this chapter</p>
            </div>
            
            <!-- Infographic -->
            <div class="resource-card" id="btnInfographic">
                <svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                    <rect x="3" y="3" width="18" height="18" rx="2" ry="2"></rect>
                    <circle cx="8.5" cy="8.5" r="1.5"></circle>
                    <polyline points="21 15 16 10 5 21"></polyline>
                </svg>
                <h3>Infographic</h3>
                <p>Visual summary</p>
            </div>
            
            <!-- Study Slides -->
            <div class="resource-card" id="btnSlides">
                <svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                    <rect x="2" y="3" width="20" height="14" rx="2" ry="2"></rect>
                    <line x1="8" y1="21" x2="16" y2="21"></line>
                    <line x1="12" y1="17" x2="12" y2="21"></line>
                </svg>
                <h3>Group Study Slides</h3>
                <p>For teaching or discussion</p>
            </div>
            
        </div>
    </section>
    
    <!-- Reflection Section -->
    <section class="reflection-section">
        <h2>Personal Reflection</h2>
        <div class="reflection-prompts">
            
            <div class="reflection-step">
                <h3>1. Assess: Where Am I Now?</h3>
                <textarea id="reflectAssess" placeholder="How does this chapter's teaching apply to my current situation?"></textarea>
            </div>
            
            <div class="reflection-step">
                <h3>2. Align: Seeking Grace</h3>
                <textarea id="reflectAlign" placeholder="What changes might the Spirit be prompting me to make?"></textarea>
            </div>
            
            <div class="reflection-step">
                <h3>3. Act: My Commitment</h3>
                <textarea id="reflectAct" placeholder="What specific action will I take this week?"></textarea>
            </div>
            
            <div class="reflection-buttons">
                <button class="btn-save" onclick="saveReflection()">Save Reflection</button>
                <button class="btn-clear" onclick="clearReflection()">Clear</button>
            </div>
            
        </div>
    </section>
    
    <!-- Discord Section -->
    <section class="discord-section">
        <div class="discord-card">
            <h2>Join the Discussion</h2>
            <p>Connect with others studying this chapter. Ask questions, share insights, and grow together in understanding.</p>
            <a href="https://discord.gg/tNwADDjTRV" target="_blank" rel="noopener noreferrer" class="btn-discord">
                <svg viewBox="0 0 24 24" fill="currentColor">
                    <path d="M20.317 4.37a19.791 19.791 0 0 0-4.885-1.515.074.074 0 0 0-.079.037c-.21.375-.444.864-.608 1.25a18.27 18.27 0 0 0-5.487 0 12.64 12.64 0 0 0-.617-1.25.077.077 0 0 0-.079-.037A19.736 19.736 0 0 0 3.677 4.37a.07.07 0 0 0-.032.027C.533 9.046-.32 13.58.099 18.057a.082.082 0 0 0 .031.057 19.9 19.9 0 0 0 5.993 3.03.078.078 0 0 0 .084-.028 14.09 14.09 0 0 0 1.226-1.994.076.076 0 0 0-.041-.106 13.107 13.107 0 0 1-1.872-.892.077.077 0 0 1-.008-.128 10.2 10.2 0 0 0 .372-.292.074.074 0 0 1 .077-.01c3.928 1.793 8.18 1.793 12.062 0a.074.074 0 0 1 .078.01c.12.098.246.198.373.292a.077.077 0 0 1-.006.127 12.299 12.299 0 0 1-1.873.892.077.077 0 0 0-.041.107c.36.698.772 1.362 1.225 1.993a.076.076 0 0 0 .084.028 19.839 19.839 0 0 0 6.002-3.03.077.077 0 0 0 .032-.054c.5-5.177-.838-9.674-3.549-13.66a.061.061 0 0 0-.031-.03zM8.02 15.33c-1.183 0-2.157-1.085-2.157-2.419 0-1.333.956-2.419 2.157-2.419 1.21 0 2.176 1.096 2.157 2.42 0 1.333-.956 2.418-2.157 2.418zm7.975 0c-1.183 0-2.157-1.085-2.157-2.419 0-1.333.955-2.419 2.157-2.419 1.21 0 2.176 1.096 2.157 2.42 0 1.333-.946 2.418-2.157 2.418z"/>
                </svg>
                Join Chapter Discussion
            </a>
        </div>
    </section>
    
    <!-- Chapter Navigation -->
    <nav class="chapter-nav">
        <a href="[PREV_CHAPTER_URL]">
            <svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                <line x1="19" y1="12" x2="5" y2="12"></line>
                <polyline points="12 19 5 12 12 5"></polyline>
            </svg>
            [PREV_CHAPTER_TITLE]
        </a>
        <a href="../writings.html">All Chapters</a>
        <a href="[NEXT_CHAPTER_URL]">
            [NEXT_CHAPTER_TITLE]
            <svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                <line x1="5" y1="12" x2="19" y2="12"></line>
                <polyline points="12 5 19 12 12 19"></polyline>
            </svg>
        </a>
    </nav>
    
    <!-- Audio Player (Hidden by default) -->
    <div class="audio-player" id="audioPlayer">
        <div class="audio-controls">
            <button class="play-pause-btn" id="playPauseBtn">
                <svg id="playIcon" viewBox="0 0 24 24">
                    <polygon points="5 3 19 12 5 21 5 3"></polygon>
                </svg>
                <svg id="pauseIcon" viewBox="0 0 24 24" style="display:none;">
                    <rect x="6" y="4" width="4" height="16"></rect>
                    <rect x="14" y="4" width="4" height="16"></rect>
                </svg>
            </button>
            <div class="seek-bar" id="seekBar">
                <div class="seek-progress" id="seekProgress"></div>
            </div>
            <div class="time-display">
                <span id="currentTime">0:00</span> / <span id="totalTime">0:00</span>
            </div>
            <select class="speed-control" id="speedControl">
                <option value="0.5">0.5x</option>
                <option value="0.75">0.75x</option>
                <option value="1" selected>1x</option>
                <option value="1.25">1.25x</option>
                <option value="1.5">1.5x</option>
                <option value="2">2x</option>
            </select>
            <button class="close-player-btn" id="closePlayer">
                <svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                    <line x1="18" y1="6" x2="6" y2="18"></line>
                    <line x1="6" y1="6" x2="18" y2="18"></line>
                </svg>
            </button>
        </div>
    </div>
    
    <!-- Back to Top Button -->
    <button class="back-to-top" id="backToTop">
        <svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
            <line x1="12" y1="19" x2="12" y2="5"></line>
            <polyline points="5 12 12 5 19 12"></polyline>
        </svg>
    </button>
    
    <!-- Modals -->
    
    <!-- Audio Overview Modal -->
    <div class="modal-overlay" id="modalOverview">
        <div class="modal-content" style="padding: 2rem; max-width: 500px;">
            <button class="modal-close" onclick="closeModal('modalOverview')">
                <svg viewBox="0 0 24 24"><line x1="18" y1="6" x2="6" y2="18"></line><line x1="6" y1="6" x2="18" y2="18"></line></svg>
            </button>
            <h2 style="color: var(--gold-primary); margin-bottom: 1rem;">Chapter Overview</h2>
            <audio controls style="width: 100%;" id="overviewAudio">
                <source src="../../assets/audio/chapter-[CHAPTER_NUMBER]-overview.mp3" type="audio/mpeg">
            </audio>
        </div>
    </div>
    
    <!-- Musical Testimony Modal -->
    <div class="modal-overlay" id="modalTestimony">
        <div class="modal-content" style="padding: 2rem; max-width: 500px;">
            <button class="modal-close" onclick="closeModal('modalTestimony')">
                <svg viewBox="0 0 24 24"><line x1="18" y1="6" x2="6" y2="18"></line><line x1="6" y1="6" x2="18" y2="18"></line></svg>
            </button>
            <h2 style="color: var(--gold-primary); margin-bottom: 1rem;">Musical Testimony</h2>
            <audio controls style="width: 100%;" id="testimonyAudio">
                <source src="../../assets/audio/chapter-[CHAPTER_NUMBER]-testimony.mp3" type="audio/mpeg">
            </audio>
        </div>
    </div>
    
    <!-- Infographic Modal -->
    <div class="modal-overlay" id="modalInfographic">
        <div class="modal-content" style="padding: 1rem;">
            <button class="modal-close" onclick="closeModal('modalInfographic')">
                <svg viewBox="0 0 24 24"><line x1="18" y1="6" x2="6" y2="18"></line><line x1="6" y1="6" x2="18" y2="18"></line></svg>
            </button>
            <img src="../../assets/images/chapter-[CHAPTER_NUMBER]-infographic.png" alt="Chapter [CHAPTER_NUMBER] Infographic" style="max-width: 100%; max-height: 85vh;">
        </div>
    </div>
    
    <!-- Slides Modal -->
    <div class="modal-overlay" id="modalSlides">
        <div class="modal-content slides-container">
            <button class="modal-close" onclick="closeModal('modalSlides')">
                <svg viewBox="0 0 24 24"><line x1="18" y1="6" x2="6" y2="18"></line><line x1="6" y1="6" x2="18" y2="18"></line></svg>
            </button>
            <div class="slide-main">
                <button class="slide-nav-btn" id="prevSlide">
                    <svg viewBox="0 0 24 24"><polyline points="15 18 9 12 15 6"></polyline></svg>
                </button>
                <img id="currentSlide" src="" alt="Slide">
                <button class="slide-nav-btn" id="nextSlide">
                    <svg viewBox="0 0 24 24"><polyline points="9 18 15 12 9 6"></polyline></svg>
                </button>
            </div>
            <div class="slide-thumbnails" id="slideThumbnails">
                <!-- Thumbnails generated by JavaScript -->
            </div>
        </div>
    </div>
    
    <!-- Footer -->
    <footer class="site-footer">
        <!-- Your standard site footer -->
    </footer>
    
    <script>
        // =====================================================
        // CONFIGURATION - UPDATE THESE VALUES
        // =====================================================
        
        const CHAPTER_ID = '[CHAPTER_ID]';  // e.g., 'ch02'
        const AUDIO_SRC = '../../assets/audio/chapter-[CHAPTER_NUMBER]-narration.mp3';
        const TOTAL_SLIDES = 10;  // Update to match your slide count
        const SLIDES_BASE_PATH = '../../assets/slides/chapter-[CHAPTER_NUMBER]/slide-';
        
        // =====================================================
        // TIMESTAMPS - PASTE GENERATED TIMESTAMPS HERE
        // =====================================================
        
        const TIMESTAMPS = {
            // Paste your generated timestamps object here
            // Format: sentenceNumber: { start: seconds, end: seconds }
            1: { start: 0.00, end: 2.50 },
            2: { start: 2.50, end: 5.00 },
            3: { start: 5.00, end: 8.00 },
            // ... continue for all sentences
        };
        
        // =====================================================
        // AUDIO PLAYER
        // =====================================================
        
        const audio = new Audio(AUDIO_SRC);
        const audioPlayer = document.getElementById('audioPlayer');
        const playPauseBtn = document.getElementById('playPauseBtn');
        const playIcon = document.getElementById('playIcon');
        const pauseIcon = document.getElementById('pauseIcon');
        const seekBar = document.getElementById('seekBar');
        const seekProgress = document.getElementById('seekProgress');
        const currentTimeEl = document.getElementById('currentTime');
        const totalTimeEl = document.getElementById('totalTime');
        const speedControl = document.getElementById('speedControl');
        
        // Show audio player
        document.getElementById('btnReadAloud').addEventListener('click', () => {
            audioPlayer.classList.add('active');
        });
        
        // Close audio player
        document.getElementById('closePlayer').addEventListener('click', () => {
            audio.pause();
            audioPlayer.classList.remove('active');
            updatePlayPauseButton();
        });
        
        // Play/Pause toggle
        playPauseBtn.addEventListener('click', () => {
            if (audio.paused) {
                audio.play();
            } else {
                audio.pause();
            }
        });
        
        audio.addEventListener('play', updatePlayPauseButton);
        audio.addEventListener('pause', updatePlayPauseButton);
        
        function updatePlayPauseButton() {
            if (audio.paused) {
                playIcon.style.display = 'block';
                pauseIcon.style.display = 'none';
            } else {
                playIcon.style.display = 'none';
                pauseIcon.style.display = 'block';
            }
        }
        
        // Time update
        audio.addEventListener('timeupdate', () => {
            const progress = (audio.currentTime / audio.duration) * 100;
            seekProgress.style.width = progress + '%';
            currentTimeEl.textContent = formatTime(audio.currentTime);
            highlightCurrentSentence();
        });
        
        audio.addEventListener('loadedmetadata', () => {
            totalTimeEl.textContent = formatTime(audio.duration);
        });
        
        // Seek
        seekBar.addEventListener('click', (e) => {
            const rect = seekBar.getBoundingClientRect();
            const percent = (e.clientX - rect.left) / rect.width;
            audio.currentTime = percent * audio.duration;
        });
        
        // Speed control
        speedControl.addEventListener('change', (e) => {
            audio.playbackRate = parseFloat(e.target.value);
        });
        
        function formatTime(seconds) {
            const mins = Math.floor(seconds / 60);
            const secs = Math.floor(seconds % 60);
            return `${mins}:${secs.toString().padStart(2, '0')}`;
        }
        
        // =====================================================
        // SENTENCE HIGHLIGHTING & SYNC
        // =====================================================
        
        function highlightCurrentSentence() {
            const currentTime = audio.currentTime;
            const sentences = document.querySelectorAll('[data-sentence]');
            
            sentences.forEach(sentence => {
                sentence.classList.remove('highlight');
            });
            
            for (const [index, times] of Object.entries(TIMESTAMPS)) {
                if (currentTime >= times.start && currentTime < times.end) {
                    const sentence = document.querySelector(`[data-sentence="${index}"]`);
                    if (sentence) {
                        sentence.classList.add('highlight');
                        // Auto-scroll to keep highlighted text visible
                        sentence.scrollIntoView({ behavior: 'smooth', block: 'center' });
                    }
                    break;
                }
            }
        }
        
        // Click on sentence to jump to that point in audio
        document.querySelectorAll('[data-sentence]').forEach(sentence => {
            sentence.addEventListener('click', () => {
                const index = sentence.dataset.sentence;
                if (TIMESTAMPS[index]) {
                    audio.currentTime = TIMESTAMPS[index].start;
                    if (audio.paused && audioPlayer.classList.contains('active')) {
                        audio.play();
                    }
                }
            });
        });
        
        // =====================================================
        // FONT SIZE CONTROLS
        // =====================================================
        
        let fontSize = 1.1;
        const content = document.querySelector('.chapter-content');
        
        document.getElementById('btnFontIncrease').addEventListener('click', () => {
            fontSize = Math.min(fontSize + 0.1, 1.6);
            content.style.fontSize = fontSize + 'rem';
            localStorage.setItem(`${CHAPTER_ID}_fontSize`, fontSize);
        });
        
        document.getElementById('btnFontDecrease').addEventListener('click', () => {
            fontSize = Math.max(fontSize - 0.1, 0.8);
            content.style.fontSize = fontSize + 'rem';
            localStorage.setItem(`${CHAPTER_ID}_fontSize`, fontSize);
        });
        
        // Load saved font size
        const savedFontSize = localStorage.getItem(`${CHAPTER_ID}_fontSize`);
        if (savedFontSize) {
            fontSize = parseFloat(savedFontSize);
            content.style.fontSize = fontSize + 'rem';
        }
        
        // =====================================================
        // BOOKMARK FEATURE
        // =====================================================
        
        document.getElementById('btnBookmark').addEventListener('click', () => {
            const scrollPos = window.scrollY;
            localStorage.setItem(`${CHAPTER_ID}_bookmark`, scrollPos);
            alert('Bookmark saved! Click again to return to this spot.');
        });
        
        // Check for existing bookmark on load
        window.addEventListener('load', () => {
            const bookmark = localStorage.getItem(`${CHAPTER_ID}_bookmark`);
            if (bookmark && confirm('Resume from your bookmarked position?')) {
                window.scrollTo({ top: parseInt(bookmark), behavior: 'smooth' });
            }
        });
        
        // =====================================================
        // SHARE FEATURE
        // =====================================================
        
        document.getElementById('btnShare').addEventListener('click', async () => {
            const shareData = {
                title: 'Chapter [CHAPTER_NUMBER]: [CHAPTER_TITLE] | Words of Plainness',
                text: 'Check out this chapter from Words of Plainness',
                url: window.location.href
            };
            
            if (navigator.share) {
                try {
                    await navigator.share(shareData);
                } catch (err) {
                    console.log('Share cancelled');
                }
            } else {
                // Fallback: copy to clipboard
                navigator.clipboard.writeText(window.location.href);
                alert('Link copied to clipboard!');
            }
        });
        
        // =====================================================
        // REFLECTION SAVE/LOAD
        // =====================================================
        
        function saveReflection() {
            const data = {
                assess: document.getElementById('reflectAssess').value,
                align: document.getElementById('reflectAlign').value,
                act: document.getElementById('reflectAct').value,
                savedAt: new Date().toISOString()
            };
            localStorage.setItem(`${CHAPTER_ID}_reflection`, JSON.stringify(data));
            alert('Your reflection has been saved locally.');
        }
        
        function clearReflection() {
            if (confirm('Are you sure you want to clear your reflection?')) {
                document.getElementById('reflectAssess').value = '';
                document.getElementById('reflectAlign').value = '';
                document.getElementById('reflectAct').value = '';
                localStorage.removeItem(`${CHAPTER_ID}_reflection`);
            }
        }
        
        // Load saved reflection on page load
        window.addEventListener('DOMContentLoaded', () => {
            const saved = localStorage.getItem(`${CHAPTER_ID}_reflection`);
            if (saved) {
                const data = JSON.parse(saved);
                document.getElementById('reflectAssess').value = data.assess || '';
                document.getElementById('reflectAlign').value = data.align || '';
                document.getElementById('reflectAct').value = data.act || '';
            }
        });
        
        // =====================================================
        // READING PROGRESS BAR
        // =====================================================
        
        window.addEventListener('scroll', () => {
            const scrollTop = window.scrollY;
            const docHeight = document.documentElement.scrollHeight - window.innerHeight;
            const progress = (scrollTop / docHeight) * 100;
            document.getElementById('readingProgress').style.width = progress + '%';
            
            // Show/hide back to top button
            const backToTop = document.getElementById('backToTop');
            if (scrollTop > 300) {
                backToTop.classList.add('visible');
            } else {
                backToTop.classList.remove('visible');
            }
        });
        
        // Back to top button
        document.getElementById('backToTop').addEventListener('click', () => {
            window.scrollTo({ top: 0, behavior: 'smooth' });
        });
        
        // =====================================================
        // MODAL CONTROLS
        // =====================================================
        
        function openModal(modalId) {
            document.getElementById(modalId).classList.add('active');
            document.body.style.overflow = 'hidden';
        }
        
        function closeModal(modalId) {
            document.getElementById(modalId).classList.remove('active');
            document.body.style.overflow = '';
            // Stop any playing audio in the modal
            const audio = document.querySelector(`#${modalId} audio`);
            if (audio) audio.pause();
        }
        
        // Resource card click handlers
        document.getElementById('btnOverview').addEventListener('click', () => openModal('modalOverview'));
        document.getElementById('btnTestimony').addEventListener('click', () => openModal('modalTestimony'));
        document.getElementById('btnInfographic').addEventListener('click', () => openModal('modalInfographic'));
        document.getElementById('btnSlides').addEventListener('click', () => {
            loadSlides();
            openModal('modalSlides');
        });
        
        // Close modals on overlay click
        document.querySelectorAll('.modal-overlay').forEach(overlay => {
            overlay.addEventListener('click', (e) => {
                if (e.target === overlay) {
                    closeModal(overlay.id);
                }
            });
        });
        
        // Close modals on Escape key
        document.addEventListener('keydown', (e) => {
            if (e.key === 'Escape') {
                document.querySelectorAll('.modal-overlay.active').forEach(modal => {
                    closeModal(modal.id);
                });
            }
        });
        
        // =====================================================
        // SLIDES CAROUSEL
        // =====================================================
        
        let currentSlideIndex = 0;
        
        function loadSlides() {
            const thumbnailsContainer = document.getElementById('slideThumbnails');
            thumbnailsContainer.innerHTML = '';
            
            for (let i = 1; i <= TOTAL_SLIDES; i++) {
                const thumb = document.createElement('img');
                thumb.src = `${SLIDES_BASE_PATH}${i.toString().padStart(2, '0')}.png`;
                thumb.className = 'slide-thumb' + (i === 1 ? ' active' : '');
                thumb.addEventListener('click', () => showSlide(i - 1));
                thumbnailsContainer.appendChild(thumb);
            }
            
            showSlide(0);
        }
        
        function showSlide(index) {
            if (index < 0) index = TOTAL_SLIDES - 1;
            if (index >= TOTAL_SLIDES) index = 0;
            
            currentSlideIndex = index;
            const slideNum = (index + 1).toString().padStart(2, '0');
            document.getElementById('currentSlide').src = `${SLIDES_BASE_PATH}${slideNum}.png`;
            
            // Update thumbnail active state
            document.querySelectorAll('.slide-thumb').forEach((thumb, i) => {
                thumb.classList.toggle('active', i === index);
            });
        }
        
        document.getElementById('prevSlide').addEventListener('click', () => showSlide(currentSlideIndex - 1));
        document.getElementById('nextSlide').addEventListener('click', () => showSlide(currentSlideIndex + 1));
        
        // Keyboard navigation for slides
        document.addEventListener('keydown', (e) => {
            if (document.getElementById('modalSlides').classList.contains('active')) {
                if (e.key === 'ArrowLeft') showSlide(currentSlideIndex - 1);
                if (e.key === 'ArrowRight') showSlide(currentSlideIndex + 1);
            }
        });
    </script>
</body>
</html>
